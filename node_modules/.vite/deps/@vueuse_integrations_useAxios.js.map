{
  "version": 3,
  "sources": ["../../@vueuse/integrations/useAxios.mjs"],
  "sourcesContent": ["import { shallowRef, ref } from 'vue-demi';\r\nimport { isString, until } from '@vueuse/shared';\r\nimport axios from 'axios';\r\n\r\nvar __defProp = Object.defineProperty;\r\nvar __defProps = Object.defineProperties;\r\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\r\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\r\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\r\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __spreadValues = (a, b) => {\r\n  for (var prop in b || (b = {}))\r\n    if (__hasOwnProp.call(b, prop))\r\n      __defNormalProp(a, prop, b[prop]);\r\n  if (__getOwnPropSymbols)\r\n    for (var prop of __getOwnPropSymbols(b)) {\r\n      if (__propIsEnum.call(b, prop))\r\n        __defNormalProp(a, prop, b[prop]);\r\n    }\r\n  return a;\r\n};\r\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\r\nfunction useAxios(...args) {\r\n  const url = typeof args[0] === \"string\" ? args[0] : void 0;\r\n  const argsPlaceholder = isString(url) ? 1 : 0;\r\n  let defaultConfig = {};\r\n  let instance = axios;\r\n  let options = { immediate: !!argsPlaceholder, shallow: true };\r\n  const isAxiosInstance = (val) => !!(val == null ? void 0 : val.request);\r\n  if (args.length > 0 + argsPlaceholder) {\r\n    if (isAxiosInstance(args[0 + argsPlaceholder]))\r\n      instance = args[0 + argsPlaceholder];\r\n    else\r\n      defaultConfig = args[0 + argsPlaceholder];\r\n  }\r\n  if (args.length > 1 + argsPlaceholder) {\r\n    if (isAxiosInstance(args[1 + argsPlaceholder]))\r\n      instance = args[1 + argsPlaceholder];\r\n  }\r\n  if (args.length === 2 + argsPlaceholder && !isAxiosInstance(args[1 + argsPlaceholder]) || args.length === 3 + argsPlaceholder)\r\n    options = args[args.length - 1];\r\n  const response = shallowRef();\r\n  const data = options.shallow ? shallowRef() : ref();\r\n  const isFinished = ref(false);\r\n  const isLoading = ref(false);\r\n  const isAborted = ref(false);\r\n  const error = shallowRef();\r\n  const cancelToken = axios.CancelToken.source();\r\n  const abort = (message) => {\r\n    if (isFinished.value || !isLoading.value)\r\n      return;\r\n    cancelToken.cancel(message);\r\n    isAborted.value = true;\r\n    isLoading.value = false;\r\n    isFinished.value = false;\r\n  };\r\n  const loading = (loading2) => {\r\n    isLoading.value = loading2;\r\n    isFinished.value = !loading2;\r\n  };\r\n  const waitUntilFinished = () => new Promise((resolve, reject) => {\r\n    until(isFinished).toBe(true).then(() => resolve(result)).catch(reject);\r\n  });\r\n  const then = (onFulfilled, onRejected) => waitUntilFinished().then(onFulfilled, onRejected);\r\n  const execute = (executeUrl = url, config = {}) => {\r\n    error.value = void 0;\r\n    const _url = typeof executeUrl === \"string\" ? executeUrl : url != null ? url : \"\";\r\n    loading(true);\r\n    instance(_url, __spreadProps(__spreadValues(__spreadValues({}, defaultConfig), typeof executeUrl === \"object\" ? executeUrl : config), { cancelToken: cancelToken.token })).then((r) => {\r\n      response.value = r;\r\n      data.value = r.data;\r\n    }).catch((e) => {\r\n      error.value = e;\r\n    }).finally(() => loading(false));\r\n    return { then };\r\n  };\r\n  if (options.immediate && url)\r\n    execute();\r\n  const result = {\r\n    response,\r\n    data,\r\n    error,\r\n    finished: isFinished,\r\n    loading: isLoading,\r\n    isFinished,\r\n    isLoading,\r\n    cancel: abort,\r\n    isAborted,\r\n    canceled: isAborted,\r\n    aborted: isAborted,\r\n    isCanceled: isAborted,\r\n    abort,\r\n    execute\r\n  };\r\n  return __spreadProps(__spreadValues({}, result), {\r\n    then\r\n  });\r\n}\r\n\r\nexport { useAxios };\r\n"],
  "mappings": "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",
  "names": []
}
